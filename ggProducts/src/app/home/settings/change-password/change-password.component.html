<ion-header>
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-icon (click)="close()" class="back-btn" name="arrow-back-outline"></ion-icon>
    </ion-buttons>
    <ion-title class="header-title">CHANGE PASSWORD</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content color="tertiary">
  <ion-grid>
    <ion-row>
      <ion-col sizeMd="6" offsetMd="3">
        <ion-card>
          <ion-item class="avatar">
            <ion-avatar slot="start">
              <img alt="Silhouette of a person's head" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
            </ion-avatar>
            <ion-card-subtitle class="username" color="dark">{{currentUser?.firstname}} {{currentUser?.lastname}}</ion-card-subtitle>
          </ion-item>
          <form *ngIf="changeForm" (ngSubmit)="onSubmit()" [formGroup]="changeForm">
            <ion-card-content>
              <ion-list>
                <ion-item>
                  <ion-label for="oldPassword" position="floating">Old Password</ion-label>
                  <ion-input
                  [type]="passwordoldType"
                  class="form-control"
                  formControlName="oldPassword"
                  [clearOnEdit]="false"></ion-input>
                  <ion-icon class="passwordIcon" slot="end" item-end [name]="passwordOldIcon" class="passwordIcon" (click)='hideShowOldPassword()'></ion-icon>
                </ion-item>
                <ion-text *ngIf="changeForm.controls.oldPassword.touched && changeForm.controls.oldPassword.errors?.['required']">Password is required</ion-text>
                <ion-text *ngIf="changeForm.controls.oldPassword.touched && changeForm.controls.oldPassword.errors?.['minlength']">Password must have 6 characters</ion-text>


                <ion-item>
                  <ion-label for="newPassword" position="floating">New Password</ion-label>
                  <ion-input
                  [type]="passwordnewType"
                  class="form-control"
                  formControlName="newPassword"
                  [clearOnEdit]="false"></ion-input>
                  <ion-icon class="passwordIcon" slot="end" item-end [name]="passwordNewIcon" class="passwordIcon" (click)='hideShowNewPassword()'></ion-icon>
                </ion-item>
                <ion-text *ngIf="changeForm.controls.newPassword.touched && changeForm.controls.newPassword.errors?.['required']">Password is required</ion-text>
                <ion-text *ngIf="changeForm.controls.newPassword.touched && changeForm.controls.newPassword.errors?.['minlength']">Password must have 6 characters</ion-text>

                <ion-item>
                  <ion-label for="confirmPassword" position="floating">Confirm Password</ion-label>
                  <ion-input
                  [type]="passwordType"
                  class="form-control"
                  formControlName="confirmPassword"
                  [clearOnEdit]="false"></ion-input>
                  <ion-icon class="passwordIcon" slot="end" item-end [name]="passwordIcon" class="passwordIcon" (click)='hideShowPassword()'></ion-icon>
                </ion-item>
                <ion-text *ngIf="changeForm.controls.confirmPassword.errors?.['required'] && changeForm.controls.confirmPassword.touched ">Password is required</ion-text>
                <ion-text *ngIf="changeForm.controls.confirmPassword.touched && changeForm.controls.confirmPassword.errors?.['minlength']">Password must have 6 characters</ion-text>
                <ion-text *ngIf="!changeForm.controls.confirmPassword.errors && changeForm.hasError('notSame')">Passwords do not match</ion-text>

              </ion-list>
            </ion-card-content>
            <ion-card-content >
              <ion-card-title >
                <ion-button expand="full" type="submit" [disabled]="changeForm.invalid" color="secondary" class="done">RESET PASSWORD</ion-button>
              </ion-card-title>
            </ion-card-content>
          </form>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
